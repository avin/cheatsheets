# Интеграционные и коммуникационные паттерны

## ESB (Enterprise Service Bus)
- **Суть**: централизованная шина, через которую интегрируются сервисы (routing, трансформация, orchestration).
- **Когда**: legacy SOA, интеграция с множеством внешних систем.
- **Плюсы**: единая точка управления, оркестрация.
- **Минусы**: single point of failure, "интеграционная монолитность".

## Event-Driven Architecture (EDA)
- **Суть**: сервисы общаются через события (pub/sub). Продукт публикует события, подписчики реагируют.
- **Когда**: слабосвязанная система, много асинхронных процессов.
- **Плюсы**: масштабируемость, loose coupling.
- **Минусы**: сложность трассировки и дебага, eventual consistency.

## Message Queue (MQ)
- **RabbitMQ, ActiveMQ, SQS**: асинхронная очередь сообщений, гарантированная доставка.
- **Использование**: обрабатываем задания, ретраи, компенсации.

## Event Streaming
- **Kafka, Pulsar**: лог событий, подписчики читают в своём темпе.
- **Use case**: аналитика, audit log, обмен данными между сервисами.

## API Gateway / BFF (Backend for Frontend)
- **API Gateway**: единая точка входа, маршрутизация, авторизация, rate limiting.
- **BFF**: адаптация API под конкретный клиент (web/mobile). Удобно, когда потребители сильно разные.

## Webhooks
- **Суть**: внешний сервис уведомляет ваш URL о событии (Stripe, GitHub).
- **Важно**: проверять подписи, ретраи, идемпотентность.

## Choreography vs Orchestration
- **Choreography**: сервисы реагируют на события сами.
- **Orchestration**: координацией управляет отдельный оркестратор (Camunda, Temporal).

## Circuit Breaker
- **Суть**: паттерн для предотвращения cascade failures. При ошибках переводит запросы в "открытое" состояние.
- **Инструменты**: Hystrix, Resilience4j, Envoy.

## API Composition / Aggregator
- **Суть**: агрегируем данные из нескольких сервисов в одном endpoint.
- **Когда**: для формирования "view" слоя, отчётов, BFF.

## Retry / Backoff / Dead Letter Queue
- **Retry**: повторная попытка при временных ошибках.
- **Backoff**: увеличивающиеся интервалы (exponential).
- **DLQ**: "мёртвая" очередь для сообщений, которые не удалось обработать.
